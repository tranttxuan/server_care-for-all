(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,s){},64:function(e,t,s){},65:function(e,t,s){},71:function(e,t,s){},72:function(e,t,s){},77:function(e,t,s){},78:function(e,t,s){},79:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){},84:function(e,t,s){},85:function(e,t,s){},86:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(1),r=s.n(n),c=s(20),i=s.n(c),o=s(2),l=s(3),d=s(5),h=s(4),j=s(9),u=s(13),b=s(6),p=s(8),m=s(22),O=s.n(m),f=O.a.create({baseURL:"https://care-for-all.herokuapp.com/api",withCredentials:!0});function x(e){if(e.response)throw console.log(e.response.data.message),e.response.data;throw e}var v=function(e){return f.post("/auth/signup",e).then((function(e){return e.data})).catch(x)},g=function(e){return f.post("/auth/login",e).then((function(e){return e.data})).catch(x)},y=function(){return f.delete("/auth/logout").catch(x)},N=function(){return f.get("/auth/isLoggedIn").then((function(e){return e.data})).catch(x)},S=function(e){return f.patch("/auth/update",e).then((function(e){return e.data})).catch(x)},k=function(){return f.get("/auth/profile").then((function(e){return e.data})).catch(x)},C=function(e){return f.post("/announcements/new",e).then((function(e){return e.data})).catch(x)},w=function(e){return f.get("/announcements/one/".concat(e)).then((function(e){return e.data})).catch(x)},_=function(e,t){return f.patch("/announcements/update/".concat(t),e).then((function(e){return e.data})).catch(x)},A=function(e){return f.delete("/announcements/delete/".concat(e)).then((function(e){return e.data})).catch(x)},P=function(e){return f.get("/announcements/author/".concat(e)).then((function(e){return e.data})).catch(x)},F=function(e){return f.get("/announcements/".concat(e)).then((function(e){return e.data})).catch(x)},D=function(e){return f.post("/announcements/apply/".concat(e)).then((function(e){return e.data})).catch(x)},L=function(e){return f.post("/announcements/no-apply/".concat(e)).then((function(e){return e.data})).catch(x)},T=function(e,t){return f.post("/reviews/create/".concat(t),e).then((function(e){return e.data})).catch(x)},M=function(e){return f.post("/web-reviews",e).then((function(e){return e.data})).catch(x)},E=function(){return f.get("/web-reviews").then((function(e){return e.data})).catch(x)},I=function(e){return f.post("/providers/favorite/".concat(e)).then((function(e){return e.data})).catch(x)},R=function(e){return f.post("/providers/no-favorite/".concat(e)).then((function(e){return e.data})).catch(x)},V=function(e,t){return f.get("/providers/one/".concat(e,"?limit=").concat(t)).then((function(e){return e.data})).catch(x)},B=function(e){return f.post("/providers/booking/".concat(e)).then((function(e){return e.data})).catch(x)},U=function(e){return f.post("/providers/no-booking/".concat(e)).then((function(e){return e.data})).catch(x)},Y=function(e){return f.post("/providers/no-booking/user/".concat(e)).then((function(e){return e.data})).catch(x)},G=function(e){return f.get("/providers/".concat(e)).then((function(e){return e.data})).catch(x)},q=function(e){return f.post("/messages",e).then((function(e){return e.data})).catch(x)},H=function(e,t){return f.get("/messages/".concat(e,"/").concat(t)).then((function(e){return e.data})).catch(x)},J=function(e){return f.get("/messages/".concat(e)).then((function(e){return e.data})).catch(x)},Z=function(e,t){return f.patch("/messages/add/".concat(e),t).then((function(e){return e.data})).catch(x)},K=r.a.createContext(),W=s(21),z=(s(64),function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).state={search:"",results:[],isLoading:!1},a.handleSearchChange=a.handleSearchChange.bind(Object(W.a)(a)),a}return Object(l.a)(s,[{key:"handleSearchChange",value:function(e){var t=this;this.setState({search:e.target.value,isLoading:!0}),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){t.performSearch()}),1e3)}},{key:"performSearch",value:function(){var e=this;""!==this.state.search?O.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.search,".json?access_token=pk.eyJ1IjoidHJhbngiLCJhIjoiY2tqZzR2M2RhMG1mNjJ5bG9wbTF2Z3EwaSJ9.s4CffQ9GjURVeHVpgekb1A")).then((function(t){e.setState({results:t.data.features,isLoading:!1})})):this.setState({results:[],isLoading:!1})}},{key:"handleItemClicked",value:function(e){this.setState({search:e.place_name,results:[]}),this.props.onSelect(e)}},{key:"render",value:function(){var e=this,t=this.state,s=t.results,n=t.isLoading;return Object(a.jsxs)("div",{className:"AutocompletePlace",children:[Object(a.jsx)("input",{className:"input",type:"text",value:this.props.defaultValue||this.state.search,onChange:this.handleSearchChange,placeholder:"Enter your address",autoComplete:"off"}),Object(a.jsxs)("ul",{className:"AutocompletePlace-results",children:[s.map((function(t){return Object(a.jsx)("li",{className:"AutocompletePlace-items",onClick:function(){return e.handleItemClicked(t)},children:t.place_name},t.id)})),n&&Object(a.jsx)("li",{className:"AutocompletePlace-items",children:"Loading..."})]})]})}}]),s}(n.Component));s(65);var Q=function(e){var t=e.message,s=e.btnOne,n=e.btnTwo,r=e.handleBtnOne,c=e.handleBtnTwo;return Object(a.jsx)("div",{className:"PopUp",children:Object(a.jsxs)("div",{className:"PopUp__container",children:[Object(a.jsx)("h1",{children:t}),Object(a.jsxs)("div",{children:[s&&Object(a.jsx)("button",{onClick:function(e){return r(e)},children:s}),Object(a.jsx)("button",{onClick:function(e){return c(e)},children:n})]})]})})},$=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={houseKeeping:"",shoppingAndErrands:"",specialNeedsCare:"",homeworkAssistance:""},e.handleChange=function(t){var s=t.target,a=s.name,n=s.checked;"false"===e.props.editable?e.setState(Object(p.a)({},a,e.state.name)):(e.setState(Object(p.a)({},a,n)),e.props.handleServices(a,n))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){if(this.props.defaultValue){var e=this.props.defaultValue,t=e.houseKeeping,s=e.shoppingAndErrands,a=e.specialNeedsCare,n=e.homeworkAssistance;this.setState({houseKeeping:t,shoppingAndErrands:s,specialNeedsCare:a,homeworkAssistance:n})}}},{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)(n.Fragment,{children:[Object(a.jsx)("label",{className:"label",htmlFor:"houseKeeping",children:"House Keeping"}),Object(a.jsx)("input",{id:"houseKeeping",type:"checkbox",name:"houseKeeping",onChange:this.handleChange,checked:this.state.houseKeeping}),Object(a.jsx)("label",{className:"label",htmlFor:"shoppingAndErrands",children:"Shopping And Errands"}),Object(a.jsx)("input",{id:"shoppingAndErrands",type:"checkbox",name:"shoppingAndErrands",onChange:this.handleChange,checked:this.state.shoppingAndErrands}),Object(a.jsx)("label",{className:"label",htmlFor:"specialNeedsCare",children:"Special needs care"}),Object(a.jsx)("input",{id:"specialNeedsCare",type:"checkbox",name:"specialNeedsCare",onChange:this.handleChange,checked:this.state.specialNeedsCare}),Object(a.jsx)("label",{className:"label",htmlFor:"homeworkAssistance",children:"Homework Assistance"}),Object(a.jsx)("input",{id:"homeworkAssistance",type:"checkbox",name:"homeworkAssistance",onChange:this.handleChange,checked:this.state.homeworkAssistance})]})})}}]),s}(n.Component),X=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={childCare:"",seniorCare:"",petCare:""},e.handleChange=function(t){var s=t.target,a=s.name,n=s.checked;"false"===e.props.editable?e.setState(Object(p.a)({},a,e.state[a])):(e.setState(Object(p.a)({},a,n)),e.props.handleServices(a,n))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){if(this.props.defaultValue){var e=this.props.defaultValue,t=e.childCare,s=e.seniorCare,a=e.petCare;this.setState({childCare:t,seniorCare:s,petCare:a})}}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{className:"label",htmlFor:"childCare",children:"Child care"}),Object(a.jsx)("input",{id:"childCare",type:"checkbox",name:"childCare",onChange:this.handleChange,checked:this.state.childCare}),Object(a.jsx)("label",{className:"label",htmlFor:"seniorCare",children:"Senior care"}),Object(a.jsx)("input",{id:"seniorCare",type:"checkbox",name:"seniorCare",onChange:this.handleChange,checked:this.state.seniorCare}),Object(a.jsx)("label",{className:"label",htmlFor:"petCare",children:"Pet care"}),Object(a.jsx)("input",{id:"petCare",type:"checkbox",name:"petCare",onChange:this.handleChange,checked:this.state.petCare})]})}}]),s}(n.Component),ee=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={title:"",description:"",formattedAddress:"",location:"",time:"",service:null,additionalServices:null,displayMessage:!1,idPost:"",isEditPage:!1,error:""},e.handleChange=function(t){var s=t.target,a=s.name,n=s.value;e.setState(Object(p.a)({},a,n))},e.handlePlace=function(t){var s=t.geometry,a=t.place_name;e.setState({location:s,formattedAddress:a})},e.handleServices=function(t,s){console.log("service",t,s),e.setState({service:Object(b.a)(Object(b.a)({},e.state.service),{},Object(p.a)({},t,s))})},e.handleAdditionalServices=function(t,s){e.setState({additionalServices:Object(b.a)(Object(b.a)({},e.state.additionalServices),{},Object(p.a)({},t,s))})},e.handleSubmit=function(t){t.preventDefault();var s=e.state,a=(s.error,s.isEditPage,s.idPost,s.displayMessage,Object(u.a)(s,["error","isEditPage","idPost","displayMessage"]));e.props.match.params.idPost?(console.log(a),_(a,e.props.match.params.idPost).then((function(t){e.setState({displayMessage:!0,idPost:t._id})})).catch((function(t){e.setState({error:t.message})}))):C(a).then((function(t){e.setState({displayMessage:!0,idPost:t._id})})).catch((function(t){e.setState({error:t.message})}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.match.params.idPost&&(this.setState({isEditPage:!0,displayMessage:!1}),w(this.props.match.params.idPost).then((function(t){var s=t.title,a=t.description,n=t.formattedAddress,r=t.service,c=t.additionalServices,i=t.time;e.setState({title:s,description:a,formattedAddress:n,service:r,additionalServices:c,time:i})})).catch((function(e){return console.log(e)})))}},{key:"render",value:function(){var e=this,t=this.state,s=t.error,r=t.displayMessage,c=t.idPost,i=t.isEditPage,o=Object(u.a)(t,["error","displayMessage","idPost","isEditPage"]),l=o.service,d=o.time,h=o.title,j=o.description,b=o.additionalServices,p=o.formattedAddress;return console.log("value",l,b),Object(a.jsxs)(n.Fragment,{children:[s&&Object(a.jsx)("p",{children:"error"}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"What kind of service do you offer?"}),Object(a.jsx)("div",{className:"form-group",children:this.props.match.params.idPost?[l&&Object(a.jsx)(X,{defaultValue:l,handleServices:this.handleServices})]:Object(a.jsx)(X,{defaultValue:l,handleServices:this.handleServices})}),Object(a.jsx)("h2",{children:"Other service"}),Object(a.jsx)("div",{className:"form-group",children:this.props.match.params.idPost?[b&&Object(a.jsx)($,{defaultValue:b,handleServices:this.handleAdditionalServices})]:Object(a.jsx)($,{defaultValue:this.state.additionalServices,handleServices:this.handleAdditionalServices})})]}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"title",children:"Title"}),Object(a.jsx)("input",{id:"title",type:"text",name:"title",value:h,onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"description",children:"Description"}),Object(a.jsx)("textarea",{rows:"10",id:"description",type:"text",name:"description",value:j,onChange:this.handleChange})]})]}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"formattedAddress",children:"Address"}),this.props.match.params.idPost&&Object(a.jsxs)("p",{children:["Your current address: ",p]}),Object(a.jsx)(z,{onSelect:this.handlePlace})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"time",children:"Time"}),Object(a.jsx)("input",{id:"time",type:"text",name:"time",value:d,onChange:this.handleChange})]})]}),Object(a.jsx)("button",{children:i?"Edit":"Post"})]}),r&&Object(a.jsx)(Q,{message:i?"Successfully updated this announcement":"Successfully posted an announcement",btnOne:"Edit",handleBtnOne:function(){e.props.history.push("/announcements/edit/".concat(c)),window.location.reload()},btnTwo:"Dashboard",handleBtnTwo:function(){return e.props.history.push("/profile")}})]})}}]),s}(n.Component);ee.contextType=K;var te=Object(j.g)(ee);var se=function(e){var t=e.component,s=e.render,n=Object(u.a)(e,["component","render"]);return Object(a.jsx)(K.Consumer,{children:function(e){return e.isLoading?Object(a.jsx)("div",{children:"Loading ..."}):e.isLoggedIn?Object(a.jsxs)(r.a.Fragment,{children:[s&&Object(a.jsx)(j.b,Object(b.a)(Object(b.a)({},n),{},{render:s})),!s&&Object(a.jsx)(j.b,Object(b.a)(Object(b.a)({},n),{},{component:t}))]}):Object(a.jsx)(j.a,{to:"/login"})}})},ae=s(7),ne=function(e){return function(t){return Object(a.jsx)(K.Consumer,{children:function(s){return Object(a.jsx)(e,Object(b.a)(Object(b.a)({},t),{},{context:s}))}})}};s(71);var re=ne((function(e){var t=e.context;return Object(a.jsxs)("nav",{className:"flex-row",children:[Object(a.jsxs)(ae.c,{exact:!0,to:"/",children:[Object(a.jsx)("i",{class:"fas fa-hands"}),Object(a.jsx)("span",{children:"Care For All"})]}),Object(a.jsxs)("ul",{className:"flex-row",children:[t.isLoggedIn&&Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)("li",{children:Object(a.jsxs)(ae.c,{to:"/message",children:[Object(a.jsx)("i",{className:"fas fa-envelope"})," Message"]})}),Object(a.jsxs)("li",{className:"container-icon",children:[Object(a.jsx)("img",{src:t.user.image&&t.user.image}),Object(a.jsxs)("ul",{className:"after-icon",children:[Object(a.jsxs)("li",{children:["Hello ",Object(a.jsx)("strong",{children:t.user.firstName})]}),Object(a.jsxs)("li",{children:[" ",Object(a.jsx)(ae.c,{to:"/profile",children:"Your profile"})]}),Object(a.jsx)("li",{onClick:function(){t.removeUser()},children:"Log out"})]})]})]}),!t.isLoggedIn&&Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)("li",{children:[Object(a.jsx)(ae.c,{to:"/signup",className:"btn",children:"Sign up"})," "]}),Object(a.jsx)("li",{children:Object(a.jsx)(ae.c,{to:"/login",className:"nav__login",children:"Log in"})})]})]})]})}));var ce=function(e){var t=e.rating,s=e.startId,n=e.onClick,r="star-rating-blank";return t&&t>=s&&(r="star-rating-filled"),Object(a.jsx)("div",{onClick:n,children:Object(a.jsx)("svg",{height:"20px",width:"23px",className:r,viewBox:"0 0 25 23","data-rating":"1",children:Object(a.jsx)("polygon",{strokeWidth:"0",points:"9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78"})})})},ie=(s(72),function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={stars:[1,2,3,4,5],hoverRating:0,rating:0,inReviewCard:!1},e.onClick=function(t){e.state.inReviewCard||(e.setState({rating:t}),e.props.addStarRating(t))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){"/profile"===this.props.match.path&&this.setState({inReviewCard:!1}),"review"!==this.props.match.path.split("/")[this.props.match.path.split("/").length-1]&&"/profile"!==this.props.match.path&&this.setState({rating:this.props.rate,inReviewCard:!0})}},{key:"render",value:function(){for(var e=this,t=this.state,s=t.stars,n=t.rating,r=t.inReviewCard,c=[],i=1;i<n+1;i++)c.push(i);return Object(a.jsxs)("div",{children:[!r&&Object(a.jsx)("h3",{children:"Star Rating"}),Object(a.jsx)("div",{style:{display:"flex"},children:r?c.map((function(t,s){return Object(a.jsx)(ce,{startId:s,rating:n,onClick:function(){return e.onClick(s)}},s)})):s.map((function(t,s){return Object(a.jsx)(ce,{startId:s,rating:n,onClick:function(){return e.onClick(s)}},s)}))})]})}}]),s}(n.Component)),oe=Object(j.g)(ie),le=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={review:"",rate:"",error:"",displayMessage:!1},e.handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.addStarRating=function(t){e.setState({rate:t+1})},e.handleSubmit=function(t){t.preventDefault();var s=e.state,a=(s.displayMessage,s.error,Object(u.a)(s,["displayMessage","error"]));""===a.review?(e.setState({error:"Write your review"}),setTimeout((function(){e.setState({error:""})}),3e3)):e.props.match.params.idProvider?T(a,e.props.match.params.idProvider).then((function(t){"Successfully added a review"===t.message?e.setState({displayMessage:!0}):e.setState({error:t.message})})).catch((function(t){console.log(t.message),e.setState({error:t.message})})):(console.log("data",a),M(a).then((function(t){e.setState({displayMessage:!0})})).catch((function(t){console.log(t.message),e.setState({error:t.message})})))},e}return Object(l.a)(s,[{key:"render",value:function(){var e,t=this;return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsxs)("h2",{children:["Your review for ",Object(a.jsx)("strong",{children:null===(e=this.props.location.state)||void 0===e?void 0:e.name})]}),this.state.error&&Object(a.jsx)("p",{children:this.state.error}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"review",children:"Write your reviews:"}),Object(a.jsx)("textarea",{id:"review",rows:"5",type:"text",name:"review",value:this.state.review,onChange:this.handleChange})]}),Object(a.jsx)(oe,{addStarRating:this.addStarRating}),Object(a.jsx)("button",{children:"Add Review"})]}),this.state.displayMessage&&Object(a.jsx)(Q,{message:"Successfully added a review",btnOne:"Back",btnTwo:"Home",handleBtnOne:function(){return t.props.history.goBack()},handleBtnTwo:function(){return t.props.history.push("/")}})]})}}]),s}(n.Component),de=Object(j.g)(le),he=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={list:[],inSentBox:!1,error:""},e.GotoReceivedBox=function(){e.setState({inSentBox:!1}),console.log("here received box"),H(e.context.user._id,"received").then((function(t){return e.setState({list:t})})).catch((function(t){return e.setState({error:t.message})}))},e.GoToSentBox=function(){e.setState({inSentBox:!0}),H(e.context.user._id,"sent").then((function(t){return e.setState({list:t})})).catch((function(t){return e.setState({error:t.message})}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.setState({inSentBox:!1}),H(this.context.user._id,"received").then((function(t){return e.setState({list:t})})).catch((function(t){return e.setState({error:t.message})}))}},{key:"render",value:function(){var e=this.state,t=e.error,s=e.list,n=e.inSentBox;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{onClick:this.GotoReceivedBox,children:"Received"}),Object(a.jsx)("button",{onClick:this.GoToSentBox,children:"Sent"})]}),t&&Object(a.jsx)("p",{children:"error"}),Object(a.jsx)("div",{children:Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsxs)("th",{children:["From: ",n?"you":"other"," "]}),Object(a.jsxs)("th",{children:["To : ",n?"other":"you"]}),Object(a.jsx)("th",{children:"Title"}),Object(a.jsx)("th",{children:"Chat thread"})]})}),Object(a.jsxs)("tbody",{children:[s.map((function(e,t){var s=e.sender,r=e.receiver,c=e._id,i=e.announcement;return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{children:["From:",n?"you":Object(a.jsxs)("p",{children:[s.lastName," ",s.firstName]})," "]}),Object(a.jsxs)("td",{children:["TO: ",n?Object(a.jsxs)("p",{children:[r.lastName," ",r.firstName]}):"you"]}),Object(a.jsx)("td",{children:Object(a.jsx)(ae.c,{to:"/message/".concat(c),children:i?Object(a.jsx)("p",{children:i.title.substring(0,50)}):"request"})}),Object(a.jsx)("td",{children:Object(a.jsx)(ae.c,{to:"/message/".concat(c),children:Object(a.jsx)("i",{className:"fas fa-comments"})})})]},t)})),0===s.length&&Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:"4",children:" No Message"})})]})]})})]})}}]),s}(n.Component);he.contextType=K;var je=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)(he,{})}),Object(a.jsx)("div",{})]})}}]),s}(n.Component),ue=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={applicants:[],error:"",submit:""},e.handleApply=function(){e.didApply()?L(e.props.id).then((function(t){return e.setState({applicants:t.applicants})})).catch((function(t){e.setState({error:"Sign in to apply this job "})})):D(e.props.id).then((function(t){console.log("check",t),e.setState({applicants:t.applicants})})).catch((function(t){e.setState({error:"Sign in to apply this job "})}))},e.didApply=function(){var t,s;return null===(t=e.state.applicants)||void 0===t?void 0:t.includes(null===(s=e.context.user)||void 0===s?void 0:s._id)},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.setState({applicants:this.props.applicants})}},{key:"render",value:function(){return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsx)("button",{onClick:this.handleApply,style:{color:this.didApply()&&"green"},children:Object(a.jsx)("p",{children:this.didApply()?"Applied":"Apply now!"})}),this.state.error&&Object(a.jsxs)("p",{children:[this.state.error," ",Object(a.jsx)(ae.c,{to:"/login",children:"Log in"})]})]})}}]),s}(n.Component);ue.contextType=K;var be=s(18),pe=(s(77),Object(be.b)({accessToken:"pk.eyJ1IjoidHJhbngiLCJhIjoiY2tqZzR2M2RhMG1mNjJ5bG9wbTF2Z3EwaSJ9.s4CffQ9GjURVeHVpgekb1A"})),me=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={lng:2.349014,lat:48.864716,zoom:12},e.handleClick=function(t){e.props.match.path.includes("/providers/")?e.props.history.push("/provider/".concat(t._id)):e.props.history.push("/announcements/".concat(t._id))},e.onHover=function(){return Object(a.jsx)("p",{style:{position:"absolute"},children:"Your position"})},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var s=t.coords.latitude,a=t.coords.longitude;e.setState({lat:s,lng:a})}),(function(){console.log("An error occured geolocating user")})):console.log("Geolocation not supported")}},{key:"render",value:function(){var e,t,s,n=this;return this.props.user&&(e=this.props.user),this.props.list&&(t=this.props.list),this.props.search&&(s=this.props.search.coordinates),Object(a.jsx)("div",{children:Object(a.jsxs)(pe,{style:"mapbox://styles/mapbox/streets-v9",zoom:[8],containerStyle:{height:"20vh",width:"80vw"},center:s||[this.state.lng,this.state.lat],children:[e&&0!==e.coordinates.length&&Object(a.jsxs)(be.a,{coordinates:e.coordinates,onClick:function(t){return n.handleClick(e)},children:[Object(a.jsx)("i",{className:"fas fa-bullseye marker user"}),Object(a.jsx)("p",{children:"Page's address"})]}),t&&t.map((function(e,t){return e.location&&0!==e.location.coordinates.length&&Object(a.jsxs)(be.a,{coordinates:e.location.coordinates,onClick:function(t){return n.handleClick(e)},children:[Object(a.jsx)("i",{className:"fas fa-map-marker-alt marker item"}),Object(a.jsxs)("p",{children:[e.lastName," ",e.firstName]})]},t)})),Object(a.jsxs)(be.a,{coordinates:[this.state.lng,this.state.lat],children:[Object(a.jsx)("i",{className:"fas fa-map-marker-alt marker current"}),Object(a.jsx)("p",{children:"Your position"})]}),s&&Object(a.jsxs)(be.a,{coordinates:s,children:[Object(a.jsx)("i",{className:"fas fa-map-marker-alt marker search"}),Object(a.jsx)("p",{children:"Your search position"})]})]})})}}]),s}(n.Component),Oe=Object(j.g)(me),fe=(s(78),function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={message:"",errors:{err_submit:"",err_auth:""},isDisplayed:!1},e.showForm=function(){e.setState({isDisplayed:!0})},e.closeForm=function(){e.setState({isDisplayed:!1})},e.handleChange=function(t){e.setState({message:t.target.value})},e.checkValidation=function(){var t=!0,s={};return""===e.state.message&&(s.err_submit="Please write your message",t=!1),e.context.user||(s.err_auth="Please log in before sending a message",t=!1),e.setState({errors:s}),setTimeout((function(){e.setState({errors:{}})}),5e3),t},e.handleSubmit=function(t){if(t.preventDefault(),e.checkValidation()){var s={};s.sender=e.context.user._id,s.receiver=e.props.idReceiver,s.message=e.state.message,s.announcement=e.props.idAnnouncement,console.log(s),q(s).then((function(t){console.log("check here",t),"You are sending a message to yourself!"===s.message?e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:t.message})}})):(e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:"Your message sent"})}})),setTimeout((function(){e.setState({isDisplayed:!1})}),5e3))})).catch((function(t){e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:t.message})}})),setTimeout((function(){e.setState({isDisplayed:!1})}),3e3)}))}},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{onClick:this.showForm,children:"Contact"}),Object(a.jsxs)("div",{className:"contact-announcement",style:{display:this.state.isDisplayed?"block":"none"},children:[Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsxs)("h4",{children:["Announcement title: ",this.props.title]}),Object(a.jsx)("label",{htmlFor:"message",children:"Your message"}),Object(a.jsx)("textarea",{rows:"10",value:this.state.message,name:"message",onChange:this.handleChange}),Object(a.jsx)("button",{children:"Send"}),this.state.errors.err_submit&&Object(a.jsx)("p",{children:this.state.errors.err_submit}),this.state.errors.err_auth&&Object(a.jsxs)("p",{children:[this.state.errors.err_auth,Object(a.jsx)("strong",{children:Object(a.jsx)(ae.c,{to:"/login",children:"Log in"})})]})]}),Object(a.jsx)("button",{onClick:this.closeForm,children:"Xxx"})]})]})}}]),s}(n.Component));fe.contextType=K;var xe=fe,ve=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={list:[],searchCoordinates:[]},e.handleSelect=function(t){e.setState({searchCoordinates:t.geometry})},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.service;F(t).then((function(t){return e.setState({list:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Find jobs near by your location"}),Object(a.jsx)(z,{onSelect:this.handleSelect})]}),Object(a.jsx)("div",{children:Object(a.jsx)(Oe,{list:this.state.list,search:this.state.searchCoordinates&&this.state.searchCoordinates})}),Object(a.jsx)("div",{children:this.state.list.map((function(e,t){var s=e._id,n=e.title,r=e.time,c=e.description,i=e.applicants,o=e.author;return Object(a.jsxs)("div",{className:"block",children:[Object(a.jsxs)(ae.c,{to:"/announcements/".concat(s),children:[Object(a.jsx)("h3",{children:n}),Object(a.jsxs)("p",{children:[c.substring(0,100),"..."]}),Object(a.jsxs)("p",{children:["Time:",Object(a.jsx)("strong",{children:r})]})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(ue,{id:s,applicants:i}),Object(a.jsx)(xe,{idAnnouncement:s,idReceiver:o,title:n})]})]},t)}))})]})}}]),s}(n.Component);ve.contextType=K;var ge=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={service:"",option:"",errors:{err_service:"",err_option:"",err_submit:""}},e.handleChange=function(t){var s=t.target,a=s.name,n=s.value;e.setState(Object(p.a)({},a,n))},e.checkValidation=function(){var t=!0,s={};return""===e.state.service&&(s.err_service="Please choose one option",t=!1),""===e.state.option&&(s.err_option="Please choose one option",t=!1),e.setState({errors:s}),setTimeout((function(){e.setState({errors:""})}),3e3),t},e.handleSubmit=function(t){t.preventDefault(),e.checkValidation()?"announcements"===e.state.option?e.props.history.push("/announcements/".concat(e.state.service,"/s")):"providers"===e.state.option&&e.props.history.push("/providers/".concat(e.state.service,"/s")):e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:"Try again!"})}}))},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"banner",children:[Object(a.jsx)("h2",{children:"Find trusted caregivers for your every need"}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{style:{color:this.state.errors.err_service&&"red"},children:"To get started, choose an option"}),Object(a.jsx)("label",{className:"label",htmlFor:"childCare",children:"Child care"}),Object(a.jsx)("input",{id:"childCare",type:"radio",value:"childCare",name:"service",onChange:this.handleChange}),Object(a.jsx)("label",{className:"label",htmlFor:"seniorCare",children:"Senior care"}),Object(a.jsx)("input",{id:"seniorCare",type:"radio",value:"seniorCare",name:"service",onChange:this.handleChange}),Object(a.jsx)("label",{className:"label",htmlFor:"petCare",children:"Pet care"}),Object(a.jsx)("input",{id:"petCare",type:"radio",value:"petCare",name:"service",onChange:this.handleChange}),this.state.errors.err_service&&Object(a.jsx)("p",{style:{color:"red"},children:this.state.errors.err_service})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{style:{color:this.state.errors.err_option&&"red"},children:"What would you like to do?"}),Object(a.jsx)("label",{className:"label",htmlFor:"provider",children:"Find a caregiver"}),Object(a.jsx)("input",{id:"provider",type:"radio",value:"providers",name:"option",onChange:this.handleChange}),Object(a.jsx)("label",{className:"label",htmlFor:"announcement",children:"Find a job"}),Object(a.jsx)("input",{id:"announcement",type:"radio",value:"announcements",name:"option",onChange:this.handleChange}),this.state.errors.err_option&&Object(a.jsx)("p",{style:{color:"red"},children:this.state.errors.err_option})]}),Object(a.jsxs)("button",{children:["Search ",Object(a.jsx)("i",{className:"fas fa-search"})]}),this.state.errors.err_submit&&Object(a.jsx)("p",{style:{color:"red"},children:this.state.errors.err_submit})]})]})})}}]),s}(n.Component),ye=Object(j.g)(ge);s(79);var Ne=function(){return Object(a.jsxs)("div",{className:"home__instructions",children:[Object(a.jsxs)("div",{className:"home__instructions-hire block",children:[Object(a.jsx)("h2",{className:"home__instructions-title",children:"Hire care"}),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("h3",{children:[Object(a.jsx)("i",{className:"far fa-address-card"})," Get Started"]}),Object(a.jsx)("p",{children:"Create your free profile. Post jobs for the help you want and start connecting today"})]}),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("h3",{children:[Object(a.jsx)("i",{className:"fas fa-search"})," Select Candidates"]}),Object(a.jsx)("p",{children:"Find candidates with our search. Add favorites, send message or book an appointment "})]}),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("h3",{children:[Object(a.jsx)("i",{className:"fas fa-bullseye"})," Interview and Hire"]}),Object(a.jsx)("p",{children:"Get background checks, discuss by message, conduct online interviews"})]})]}),Object(a.jsxs)("div",{className:"home__instructions-find block",children:[Object(a.jsx)("h2",{className:"home__instructions-title",children:"Find job"}),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("h3",{children:[Object(a.jsx)("i",{className:"far fa-address-card"})," Get Started"]}),Object(a.jsx)("p",{children:"Create your free profile and post your profile"})]}),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("h3",{children:[Object(a.jsx)("i",{className:"fas fa-search"})," Select Jobs"]}),Object(a.jsx)("p",{children:"Find jobs with our search. Send your application or send message"})]}),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsxs)("h3",{children:[Object(a.jsx)("i",{className:"fas fa-bullseye"})," Interview and Contract"]}),Object(a.jsx)("p",{children:"Get more information through messages, conduct online interviews"})]})]})]})};var Se=function(e){var t=e.rate,s=e.name,n=e.review;return Object(a.jsxs)("div",{className:"review-card",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:s}),Object(a.jsx)(oe,{rate:t})]}),Object(a.jsx)("p",{children:n})]})},ke=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={list:[]},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;E().then((function(t){e.setState({list:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{children:this.state.list.map((function(e,t){return Object(a.jsx)(Se,{name:e.sender.firstName,rate:e.rate,review:e.review},t)}))})})}}]),s}(n.Component),Ce=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={},e.handleServices=function(e,t){console.log(e,t)},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(ye,{}),Object(a.jsx)(Ne,{}),Object(a.jsx)(ke,{})]})}}]),s}(n.Component),we=(s(39),function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={password:"Tran123",email:"tran@gmail.com",errors:{err_password:"",err_email:"",err_submit:""}},e.handleChange=function(t){var s=t.target,a=s.value,n=s.name;e.setState(Object(p.a)({},n,a))},e.checkValidation=function(){var t=e.state,s=t.email,a=t.password,n=!0,r={};return s||(r.err_email="This field is required",n=!1),a||(r.err_password="This field is required"),e.setState({errors:r}),setTimeout((function(){e.setState({errors:""})}),3e3),n},e.handleSubmit=function(t){if(t.preventDefault(),e.checkValidation()){var s=e.state,a=(s.errors,Object(u.a)(s,["errors"]));g(a).then((function(t){e.context.setUser(t)})).catch((function(t){e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:t.message})}}))}))}},e}return Object(l.a)(s,[{key:"render",value:function(){if(this.context.isLoggedIn)return Object(a.jsx)(j.a,{to:"/"});var e=this.state,t=e.email,s=e.password,n=e.errors,r=n.err_email,c=n.err_password,i=n.err_submit;return Object(a.jsxs)("section",{children:[Object(a.jsx)("header",{children:Object(a.jsx)("h1",{children:"Login"})}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{className:r?"input failure":"input success",id:"email",type:"text",name:"email",value:t,onChange:this.handleChange}),r&&Object(a.jsx)("p",{className:"failure",children:r})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{className:c?"input failure":"input success",id:"password",type:"password",name:"password",value:s,onChange:this.handleChange}),c&&Object(a.jsx)("p",{className:"failure",children:c})]}),Object(a.jsx)("button",{className:"btn-submit",children:"Sign in"}),i&&Object(a.jsx)("p",{className:"failure",children:i})]})]})}}]),s}(n.Component));we.contextType=K;var _e=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(we,{})})}}]),s}(n.Component),Ae=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={announcement:null},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.idAnnouncement),w(this.props.match.params.idAnnouncement).then((function(t){return e.setState({announcement:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){if(this.state.announcement){var e=this.state.announcement,t=e._id,s=e.author,n=e.service,r=e.additionalServices,c=e.title,i=e.description,o=e.location,l=e.applicants,d=s.firstName,h=s.lastName,j=s.image;return console.log("check",o),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"block",children:Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)("img",{src:j,alt:d}),Object(a.jsxs)("p",{children:["Hello, my name is ",h," ",d]})]})}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("em",{children:"Title"})," ",Object(a.jsx)("strong",{children:c})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("em",{children:"Description: "}),i]})]}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Requires"}),Object(a.jsx)(X,{defaultValue:n,editable:"false"}),Object(a.jsx)($,{defaultValue:r,editable:"false"})]}),Object(a.jsx)("div",{className:"block",children:Object(a.jsx)(Oe,{user:o})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)(xe,{idAnnouncement:t,idReceiver:s._id,title:c}),Object(a.jsx)(ue,{id:t,applicants:l})]})]})}return Object(a.jsx)("div",{children:"Loading..."})}}]),s}(n.Component),Pe=Object(j.g)(Ae),Fe=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={isFavorite:!1,message:""},e.addToFavorite=function(){if(!e.context.user)return e.setState({message:"Login before adding this provider to your favorite list"}),void setTimeout((function(){e.setState({message:""})}),5e3);e.setState({isFavorite:!e.state.isFavorite});var t=e.props.idProvider;e.isFavorited()?R(t).then((function(t){console.log(t),e.context.setUser(t)})).catch((function(e){console.log(e.message)})):I(t).then((function(t){"Of course you are in your favorite list!"===t.message?(e.setState({message:"It's you!"}),setTimeout((function(){e.setState({message:""})}),5e3)):e.context.setUser(t)})).catch((function(t){console.log(t.message),e.setState({isFavorite:!1})}))},e.isFavorited=function(){var t;return null===(t=e.context.user)||void 0===t?void 0:t.favoriteProviders.includes(e.props.idProvider)},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.isFavorited()&&this.setState({isFavorite:!0})}},{key:"render",value:function(){return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsx)("button",{onClick:this.addToFavorite,children:this.isFavorited()?Object(a.jsx)("i",{className:"fas fa-heart",style:{color:"red"}}):Object(a.jsx)("i",{className:"far fa-heart solid"})}),this.state.message&&Object(a.jsx)("p",{children:this.state.message})]},this.props.isAdded)}}]),s}(n.Component);Fe.contextType=K;var De=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={bookingList:[],message:""},e.booking=function(){var t=e.props.idProvider;e.bookedProvider()?U(t).then((function(t){return e.setState({bookingList:t.bookingList})})).catch((function(e){console.log(e.message)})):B(t).then((function(t){"It seems you do not need a care provider!"===t.message?(e.setState({message:"It's you!"}),setTimeout((function(){e.setState({message:""})}),5e3)):e.setState({bookingList:t.bookingList})})).catch((function(t){console.log(t.message),e.setState({booking:!1})}))},e.bookedProvider=function(){var t;return e.state.bookingList.includes(null===(t=e.context.user)||void 0===t?void 0:t._id)},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.setState({bookingList:this.props.bookingList})}},{key:"render",value:function(){return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsx)("button",{onClick:this.booking,style:{color:this.bookedProvider()&&"green"},children:this.bookedProvider()?"Booked":"Booking request"}),this.state.message&&Object(a.jsx)("p",{children:this.state.message})]})}}]),s}(n.Component);De.contextType=K;s(80);var Le=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={activeIndex:0},e.goToSlide=function(t){e.setState({activeIndex:t})},e.goToPrevSlide=function(t){t.preventDefault();var s=e.state.activeIndex,a=e.props.reviews.length;s<1&&(s=a),--s,e.setState({activeIndex:s})},e.goToNextSlide=function(t){t.preventDefault();var s=e.state.activeIndex;s===e.props.reviews.length-1&&(s=-1),++s,e.setState({activeIndex:s})},e}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"carousel",children:[Object(a.jsx)("button",{className:"carousel__arrow carousel__arrow--left",onClick:function(t){return e.goToPrevSlide(t)},children:Object(a.jsx)("i",{className:"fas fa-angle-left"})}),Object(a.jsx)("ul",{className:"carousel__slides",children:this.props.reviews.map((function(t,s){return Object(a.jsx)("li",{className:s===e.state.activeIndex?"carousel__slide carousel__slide--active":"carousel__slide",children:Object(a.jsx)(Se,{className:"carousel-slide__content",review:t.review,name:t.sender.firstName,rate:t.rate},s)},s)}))}),Object(a.jsx)("button",{className:"carousel__arrow carousel__arrow--right",onClick:function(t){return e.goToNextSlide(t)},children:Object(a.jsx)("i",{className:"fas fa-angle-right"})}),Object(a.jsx)("ul",{className:"carousel__indicators",children:this.props.reviews.map((function(t,s){return Object(a.jsx)("li",{children:Object(a.jsx)("button",{className:s===e.state.activeIndex?"carousel__indicator carousel__indicator--active":"carousel__indicator",onClick:function(t){return e.goToSlide(s)}})},s)}))})]})}}]),s}(n.Component);function Te(e){var t=new Date;if(e){var s=t-new Date(e);return Math.floor(s/315576e5)}return""}function Me(e,t,s){if(!t||"object"!==typeof t||t instanceof Date||t instanceof File){var a=null==t?"":t;e.append(s,a)}else Object.keys(t).forEach((function(a){Me(e,t[a],s?"".concat(s,"[").concat(a,"]"):a)}))}function Ee(e){var t=0,s=0;if(e)return e.forEach((function(e){e.rate&&(s+=e.rate,t++)})),Math.floor(s/t)}var Ie=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={provider:null,seeMore:!1},e.getData=function(t){V(e.props.match.params.idProvider,t).then((function(t){console.log("fetch data",t),e.setState({provider:t[0]})})).catch((function(e){return console.log(e.message)}))},e.handleBack=function(){e.props.history.goBack()},e.seeMore=function(){e.getData(100),e.setState({seeMore:!0})},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.getData(4)}},{key:"render",value:function(){var e=this.state,t=e.provider,s=e.seeMore;if(t){var n=t._id,r=t.firstName,c=t.lastName,i=t.description,o=t.image,l=t.service,d=t.additionalServices,h=t.experiences,j=t.availability,u=t.reviews,b=t.location,p=t.bookingList;console.log("reviews",p,n);var m="";t.birthday&&(m=Te(t.birthday));var O=!1;return this.context.user&&this.context.user.favoriteProviders.includes(this.props.match.params.idProvider)&&(O=!0),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("button",{onClick:this.handleBack,children:[Object(a.jsx)("p",{children:Object(a.jsx)("i",{className:"fas fa-arrow-circle-left"})})," Back"]}),Object(a.jsx)(ae.c,{to:{pathname:"/provider/".concat(this.props.match.params.idProvider,"/review"),state:{name:t.firstName}},children:"Add Review"}),Object(a.jsx)(Fe,{idProvider:this.props.match.params.idProvider,isAdded:O})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("img",{src:o,alt:this.firstName}),Object(a.jsxs)("p",{children:[r," ",Object(a.jsx)("strong",{children:c})]}),m&&Object(a.jsxs)("p",{children:[m," years old"]})]}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsxs)("h2",{children:["Hello, I am ",r]}),Object(a.jsx)("p",{children:i})]}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Service offer:"}),Object(a.jsx)(X,{defaultValue:l,editable:"false"}),Object(a.jsx)("h2",{children:"I'm comfortable with:"}),Object(a.jsx)($,{defaultValue:d,editable:"false"})]}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Skills and Experiences"}),Object(a.jsx)("p",{children:h})]}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Availability"}),Object(a.jsx)("p",{children:j})]}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Reviews"}),!s&&0!==u.length&&Object(a.jsx)("button",{onClick:this.seeMore,children:"more reviews"}),0!==u.length?Object(a.jsx)(Le,{reviews:u}):Object(a.jsx)("p",{children:"0 reviews"})]}),0!==b.coordinates.length&&Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Location"}),Object(a.jsx)(Oe,{user:b})]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)(xe,{idReceiver:n}),Object(a.jsx)(De,{bookingList:p,idProvider:this.props.match.params.idProvider})]})]})}return""}}]),s}(n.Component);Ie.contextType=K;var Re=Object(j.g)(Ie),Ve=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={list:[]},e.getData=function(){P(e.props.idUser).then((function(t){e.setState({list:t})})).catch((function(e){return console.log(e)}))},e.handleDelete=function(t){A(t).then((function(t){return e.getData()})).catch((function(e){return console.log(e)}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("table",{style:{backgroundColor:"pink"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Title"}),Object(a.jsx)("th",{children:"Applicants"}),Object(a.jsx)("th",{children:"Edit"}),Object(a.jsx)("th",{children:"Delete"})]})}),Object(a.jsxs)("tbody",{children:[this.state.list.map((function(t,s){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.createdAt.toString().substr(0,10)}),Object(a.jsx)("td",{children:t.title}),Object(a.jsx)("td",{children:Object(a.jsx)("ul",{children:t.applicants.map((function(e,t){return Object(a.jsx)("li",{children:Object(a.jsx)(ae.c,{to:"/provider/".concat(e._id),children:e.lastName})},t)}))})}),Object(a.jsx)("td",{children:Object(a.jsx)(ae.c,{to:"/announcements/edit/".concat(t._id),children:Object(a.jsx)("i",{className:"fas fa-edit"})})}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:function(s){return e.handleDelete(t._id)},children:Object(a.jsx)("i",{className:"fas fa-trash-alt"})})})]},s)})),0===this.state.list.length&&Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:"5",children:"Empty list"})},0)]})]})}}]),s}(n.Component),Be=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={list:[],isFavList:!1},e.handleDelete=function(t){"true"===e.state.isFavList&&R(t).then((function(s){e.setState({list:e.state.list.filter((function(e){return e._id!==t}))})})).catch((function(e){console.log(e.message)})),"false"===e.state.isFavList&&Y(t).then((function(s){e.setState({list:e.state.list.filter((function(e){return e._id!==t}))})})).catch((function(e){console.log(e.message)}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.setState({list:this.props.list,isFavList:this.props.isFavList})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("table",{style:{backgroundColor:"pink"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Image"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Delete"}),Object(a.jsx)("th",{children:"Contact"})]})}),Object(a.jsx)("tbody",{children:this.state.list.map((function(t,s){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"true"===e.state.isFavList?Object(a.jsx)(ae.c,{to:"/provider/".concat(t._id),children:Object(a.jsx)("img",{src:t.image,alt:t.firstName})}):Object(a.jsx)("img",{src:t.image,alt:t.firstName})}),Object(a.jsx)("td",{children:"true"===e.state.isFavList?Object(a.jsxs)(ae.c,{to:"/provider/".concat(t._id),children:[t.firstName," ",t.lastName]}):Object(a.jsxs)("p",{children:[" ",t.firstName," ",t.lastName]})}),Object(a.jsx)("td",{children:Object(a.jsx)("button",{onClick:function(s){return e.handleDelete(t._id)},children:Object(a.jsx)("i",{className:"fas fa-trash-alt"})})}),Object(a.jsxs)("td",{children:["Message ",Object(a.jsx)("i",{className:"fas fa-envelope"})]}),Object(a.jsxs)("td",{children:[" ",Object(a.jsx)(xe,{idReceiver:t._id})]})]},s)}))})]})}}]),s}(n.Component),Ue=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={user:null},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;k().then((function(t){e.context.setUser(t),e.setState({user:t})})).catch((function(t){console.log(t),e.context.isLoading=!1}))}},{key:"render",value:function(){if(this.state.user){var e=this.state.user,t=e.image,s=e.firstName,n=e.lastName,r=e.birthday,c=e.formattedAddress,i=e._id,o=e.favoriteProviders,l=e.bookingList,d=Te(r);return Object(a.jsxs)("div",{className:"dashboard__container",children:[Object(a.jsx)("h1",{children:"Dashboard"}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"dashboard__information",children:[Object(a.jsx)("img",{src:t,className:"image",alt:"profile"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("em",{children:"Name : "}),s," ",Object(a.jsx)("strong",{children:n})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("em",{children:"Age: "}),d]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("em",{children:"Address : "}),c]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)("h1",{children:"DO you want to find a care provider?"}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Announcement list"}),Object(a.jsx)(ae.c,{to:"/announcements/new",children:"Add new"}),Object(a.jsx)(Ve,{idUser:i})]}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"List of favorite providers"}),Object(a.jsx)(Be,{list:o,isFavList:"true"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("h1",{children:"Do you want to find a job?"}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"You received booking requests"}),Object(a.jsx)(Be,{list:l,isFavList:"false"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("h1",{children:"Review for our website"}),Object(a.jsx)("div",{className:"block",children:Object(a.jsx)(de,{})}),Object(a.jsx)("br",{}),Object(a.jsx)("h1",{children:"Message"}),Object(a.jsx)("div",{className:"block",children:Object(a.jsx)(he,{})})]})]})]})}return Object(a.jsx)("div",{children:"Loading ..."})}}]),s}(n.Component);Ue.contextType=K;var Ye=r.a.forwardRef((function(e,t){return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)("label",{className:"UploadWidget label",htmlFor:e.name,children:e.children}),Object(a.jsx)("input",{onChange:function(t){var s=t.target.files[0],a=URL.createObjectURL(s);e.onFileSelect&&e.onFileSelect(a)},ref:t,className:"UploadWidget input",id:e.name,name:e.name,type:"file"})]})})),Ge=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={day:"",month:"",year:""},e.handleChange=function(t){var s=t.target,a=s.name,n=s.value;e.setState(Object(p.a)({},a,n)),e.props.handleBirthday(Object(b.a)(Object(b.a)({},e.state),{},Object(p.a)({},a,n)))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){if(this.props.birthdayValue){var e=this.props.birthdayValue.split("-");this.setState({day:e[2],month:e[1],year:e[0]})}}},{key:"render",value:function(){return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsx)("input",{id:"year",type:"text",name:"year",placeholder:"yyyy",value:this.state.year,onChange:this.handleChange,required:!0}),Object(a.jsx)("input",{id:"month",type:"text",name:"month",placeholder:"mm",value:this.state.month,onChange:this.handleChange,required:!0}),Object(a.jsx)("input",{id:"day",type:"text",name:"day",placeholder:"dd",value:this.state.day,onChange:this.handleChange,required:!0})]})}}]),s}(n.Component),qe=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={isProvider:""},e.handleChange=function(t){var s=t.target,a=s.name,n=s.value;console.log({name:a},{value:n}),"public"===n?(console.log("vo day"),e.setState({isProvider:!0}),e.props.handleVisibility(!0)):(e.setState({isProvider:!1}),e.props.handleVisibility(!1))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.setState({isProvider:this.props.defaultValue})}},{key:"render",value:function(){return Object(a.jsxs)(n.Fragment,{children:[Object(a.jsx)("label",{htmlFor:"public",children:"Everyone"}),Object(a.jsx)("input",{type:"radio",id:"public",name:"isProvider",value:"public",onChange:this.handleChange,checked:this.state.isProvider}),Object(a.jsx)("label",{htmlFor:"private",children:"Private"}),Object(a.jsx)("input",{type:"radio",id:"private",value:"private",name:"isProvider",onChange:this.handleChange,checked:!this.state.isProvider})]})}}]),s}(n.Component),He=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={user:null,image:"",errors:{err_submit:"",err_birthday:"",err_lastName:"",err_firstName:"",err_password:"",err_email:""},showPopUP:!1},e.imageRef=r.a.createRef(),e.handleChange=function(t){var s="file"===t.target.type?t.target.files[0]:t.target.value,a=t.target.name;e.setState({user:Object(b.a)(Object(b.a)({},e.state.user),{},Object(p.a)({},a,s))})},e.handleFileSelect=function(t){e.setState({image:t})},e.handleBirthday=function(t){var s="".concat(t.year,"-").concat(t.month,"-").concat(t.day);e.setState({user:Object(b.a)(Object(b.a)({},e.state.user),{},{birthday:s})})},e.handlePlace=function(t){var s=t.geometry,a=t.place_name;e.setState({user:Object(b.a)(Object(b.a)({},e.state.user),{},{location:s,formattedAddress:a})})},e.handleVisibility=function(t){console.log(t),e.setState({user:Object(b.a)(Object(b.a)({},e.state.user),{},{isProvider:t})})},e.handleServices=function(t,s){console.log(t,s),e.setState({user:Object(b.a)(Object(b.a)({},e.state.user),{},{service:Object(b.a)(Object(b.a)({},e.state.user.service),{},Object(p.a)({},t,s))})})},e.handleAdditionalServices=function(t,s){console.log(t,s),e.setState({user:Object(b.a)(Object(b.a)({},e.state.user),{},{additionalServices:Object(b.a)(Object(b.a)({},e.state.user.additionalServices),{},Object(p.a)({},t,s))})})},e.checkValidation=function(){var t=e.state.user,s=t.lastName,a=t.firstName,n=t.email,r=t.password,c=t.birthday,i={},o=!0;a||(o=!1,i.err_firstName="Please enter your first name"),s||(o=!1,i.err_lastName="Please enter your last name"),n?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(n)||(i.err_email="Email address is invalid",o=!1):(i.err_email="Please enter your email correctly",o=!1),void 0!==r&&r.length<6&&(o=!1,i.err_password="Enter a password, minimum of 6 characters, 1 uppercase, 1 lowercase and 1 number digit");var l=new Date(c),d=new Date;return"Invalid Date"===l&&(i.err_birthday="Please enter the correct format of your date of birth",o=!1),d-l<0&&(i.err_birthday="Check your birth year",o=!1),e.setState({errors:i}),setTimeout((function(){e.setState({errors:""})}),5e3),o},e.handleSubmit=function(t){if(t.preventDefault(),e.checkValidation()){var s=new FormData,a=e.state;a.showPopUP,a.errors,a.image;Me(s,Object(u.a)(a,["showPopUP","errors","image"])),e.imageRef.current.files[0]&&s.append("image",e.imageRef.current.files[0]),S(s).then((function(t){console.log(t),"Email already taken"===t.message?e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:"Email already taken",err_email:"Email already taken"})}})):"Please make your password at least 6 characters, that contains at least one uppercase, one lowercase and one number digit in it, for security purposes."===t.message?e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:"Check your new password",err_password:"Please make your password at least 6 characters, that contains at least one uppercase, one lowercase and one number digit in it, for security purposes."})}})):(e.context.setUser(t),setTimeout((function(){e.setState({showPopUP:!0})}),1e3))})).catch((function(t){e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:t.message})}}))}))}else e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:"Please check again your information!"})}}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.setState({user:this.context.user})}},{key:"render",value:function(){var e=this,t=this.state.errors,s=t.err_lastName,n=t.err_firstName,r=t.err_email,c=t.err_password,i=t.err_submit,o=t.err_birthday;return this.state.user?Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Edit your profile"}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,style:{display:"flex",flexDirection:"column"},children:[i&&Object(a.jsx)("p",{className:"failure",children:i}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Profile status"}),this.state.user.isProvider?Object(a.jsx)("h3",{children:"Your profile appears in the search results"}):Object(a.jsx)("h3",{children:"Your profile does not appear in the search results yet"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("img",{src:this.state.image||this.context.user.image,alt:this.state.user.firstName}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(Ye,{onFileSelect:this.handleFileSelect,name:"image",ref:this.imageRef,children:"Upload image"})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"firstName",children:"First Name"}),Object(a.jsx)("input",{className:n?"input failure":"input success",id:"firstName",type:"text",name:"firstName",value:this.state.user.firstName,onChange:this.handleChange}),n&&Object(a.jsx)("p",{className:"failure",children:n})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"lastName",children:"Last name"}),Object(a.jsx)("input",{className:s?"input failure":"input success",id:"lastName",type:"text",name:"lastName",value:this.state.user.lastName,onChange:this.handleChange}),s&&Object(a.jsx)("p",{className:"failure",children:s})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"birthday",children:"Date of birth yyyy/mm/dd"}),Object(a.jsx)(Ge,{birthdayValue:this.state.user.birthday&&this.state.user.birthday,handleBirthday:this.handleBirthday,className:o?"input failure":"input success"}),o&&Object(a.jsx)("p",{className:"failure",children:o})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{className:r?"input failure":"input success",id:"email",type:"text",name:"email",value:this.state.user.email,onChange:this.handleChange}),r&&Object(a.jsx)("p",{className:"failure",children:r})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{className:c?"input failure":"input success",id:"password",type:"password",name:"password",value:this.state.user.password,onChange:this.handleChange,placeholder:"*********"}),c&&Object(a.jsx)("p",{className:"failure",children:c})]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"formattedAddress",children:"Address"}),this.context.user.formattedAddress&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Your current address: ",this.context.user.formattedAddress]}),Object(a.jsx)("p",{children:"Change your address:"})]}),Object(a.jsx)(z,{onSelect:this.handlePlace})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"phoneNumber",children:"Phone Number"}),Object(a.jsx)("input",{id:"phoneNumber",type:"text",name:"phoneNumber",required:"required",value:this.state.user.phoneNumber,onChange:this.handleChange,placeholder:"06.90.60.90"})]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"About me"}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"description",children:"Description"}),Object(a.jsx)("textarea",{rows:"10",id:"description",type:"text",name:"description",value:this.state.user.description,onChange:this.handleChange})]})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Experiences & Skills"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"experiences",children:"Experiences"}),Object(a.jsx)("textarea",{rows:"10",id:"experiences",type:"text",name:"experiences",value:this.state.user.experiences,onChange:this.handleChange})]})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Everyone can view my profile"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(qe,{defaultValue:this.state.user.isProvider,handleVisibility:this.handleVisibility})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"I find a job/jobs at"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(X,{defaultValue:this.state.user.service,handleServices:this.handleServices})}),Object(a.jsx)("h2",{children:"I'm comfortable with:"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)($,{defaultValue:this.state.user.additionalServices,handleServices:this.handleAdditionalServices})})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("h2",{children:"Availability"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{id:"availability",type:"text",name:"availability",value:this.state.user.availability,onChange:this.handleChange})})]}),Object(a.jsx)("button",{onClick:this.handleClick,children:"Edit"})]}),this.state.showPopUP&&Object(a.jsx)(Q,{message:"Successfully updated your profile!",btnOne:this.context.user.isProvider&&"Your Page",handleBtnOne:function(){e.props.history.push("/provider/".concat(e.context.user._id))},btnTwo:"Dashboard",handleBtnTwo:function(){e.props.history.push("/profile"),window.location.reload()}})]}):Object(a.jsx)("h1",{children:"Loading ..."})}}]),s}(n.Component);He.contextType=K;var Je=Object(j.g)(He),Ze=(s(81),function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"profile_radio",children:[Object(a.jsx)("label",{htmlFor:"dashboard",children:"Dashboard"}),Object(a.jsx)("input",{type:"radio",id:"dashboard",value:"Dashboard",name:"profile",defaultChecked:!0}),Object(a.jsx)(Ue,{})]}),Object(a.jsxs)("div",{className:"profile_radio",children:[Object(a.jsx)("label",{htmlFor:"edit",children:"Edit your profile"}),Object(a.jsx)("input",{type:"radio",id:"edit",value:"Edit Profile",name:"profile"}),Object(a.jsx)(Je,{})]})]})})}}]),s}(n.Component)),Ke=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={list:[],searchCoordinates:[]},e.handleSelect=function(t){e.setState({searchCoordinates:t.geometry})},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.service;G(t).then((function(t){return e.setState({list:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{marginBottom:"5rem"},children:[Object(a.jsx)("h3",{children:"Find providers near by your location"}),Object(a.jsx)(z,{onSelect:this.handleSelect})]}),Object(a.jsx)("div",{children:Object(a.jsx)(Oe,{list:this.state.list,search:this.state.searchCoordinates&&this.state.searchCoordinates})}),Object(a.jsx)("div",{children:null===(e=this.state.list)||void 0===e?void 0:e.map((function(e,t){var s=e.image,n=e.firstName,r=e.description,c=e._id,i=e.reviews;return Object(a.jsxs)("div",{className:"block",style:{display:"flex"},children:[Object(a.jsx)(ae.c,{to:"/provider/".concat(c),target:"_blank",children:Object(a.jsx)("img",{src:s,alt:n})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(ae.c,{to:"/provider/".concat(c),target:"_blank",children:[Object(a.jsx)("h3",{children:n}),Object(a.jsxs)("p",{children:[r.substring(0,100),"..."]})]}),Object(a.jsx)(oe,{rate:Ee(i)&&Ee(i)}),Object(a.jsx)(Fe,{idProvider:c}),Object(a.jsx)(xe,{idReceiver:c})]})]},t)}))})]})}}]),s}(n.Component);Ke.contextType=K;var We=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={firstName:"Anita",lastName:"LE",password:"Tran123",email:"lena@gmail.com",errors:{err_firstName:"",err_lastName:"",err_password:"",err_email:"",err_submit:""}},e.handleChange=function(t){var s=t.target,a=s.value,n=s.name;e.setState(Object(p.a)({},n,a))},e.checkValidation=function(){var t=e.state,s=t.lastName,a=t.firstName,n=t.email,r=t.password,c=!0,i={};return n?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(n)||(i.err_email="Email address is invalid",c=!1):(i.err_email="Please enter your email correctly",c=!1),r?r.length<6&&(c=!1,i.err_password="Enter a password, minimum of 6 characters, 1 uppercase, 1 lowercase and 1 number digit"):(c=!1,i.err_password="Please enter your password"),a||(c=!1,i.err_firstName="Please enter your first name"),s||(c=!1,i.err_lastName="Please enter your last name"),e.setState({errors:i}),setTimeout((function(){e.setState({errors:""})}),5e3),c},e.handleSubmit=function(t){if(t.preventDefault(),e.checkValidation()){var s=e.state,a=s.errors,n=Object(u.a)(s,["errors"]);console.log(a),console.log(n),v(n).then((function(t){e.context.setUser(t)})).catch((function(t){return e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:t.message})}}))}))}else e.setState((function(e){return{errors:Object(b.a)(Object(b.a)({},e.errors),{},{err_submit:"Try again!"})}}))},e}return Object(l.a)(s,[{key:"render",value:function(){if(this.context.isLoggedIn)return Object(a.jsx)(j.a,{to:"/"});var e=this.state,t=e.lastName,s=e.firstName,n=e.email,r=e.password,c=e.errors,i=c.err_lastName,o=c.err_firstName,l=c.err_email,d=c.err_password,h=c.err_submit;return Object(a.jsxs)("section",{children:[Object(a.jsx)("header",{children:Object(a.jsx)("h1",{children:"Sign up"})}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"firstName",children:"First Name"}),Object(a.jsx)("input",{className:o?"input failure":"input success",id:"firstName",type:"text",name:"firstName",value:s,onChange:this.handleChange}),o&&Object(a.jsx)("p",{className:"failure",children:o})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"lastName",children:"Last name"}),Object(a.jsx)("input",{className:i?"input failure":"input success",id:"lastName",type:"text",name:"lastName",value:t,onChange:this.handleChange}),i&&Object(a.jsx)("p",{className:"failure",children:i})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{className:l?"input failure":"input success",id:"email",type:"text",name:"email",value:n,onChange:this.handleChange}),l&&Object(a.jsx)("p",{className:"failure",children:l})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{className:d?"input failure":"input success",id:"password",type:"password",name:"password",value:r,onChange:this.handleChange}),d&&Object(a.jsx)("p",{className:"failure",children:d})]}),Object(a.jsx)("button",{className:"btn-submit",children:"Sign up"}),h&&Object(a.jsx)("p",{className:"failure",children:h})]}),Object(a.jsx)("div",{children:Object(a.jsxs)("p",{children:["Already have an account? ",Object(a.jsx)(ae.b,{to:"/login",children:Object(a.jsx)("strong",{children:"Log in"})})," "]})})]})}}]),s}(n.Component);We.contextType=K;var ze=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(We,{})})}}]),s}(n.Component),Qe=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={list:null,error:"",message:""},e.onChange=function(t){e.setState({message:t.target.value})},e.onSubmit=function(t){if(t.preventDefault(),""===e.state.message)return e.setState({error:"Please write something....."});Z(e.props.match.params.idMessage,{message:e.state.message,author:e.context.user._id}).then((function(t){e.setState({list:t})})).catch((function(t){return e.setState({error:t.message})}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;J(this.props.match.params.idMessage).then((function(t){e.setState({list:t})})).catch((function(t){return e.setState({error:t})}))}},{key:"render",value:function(){var e=this;if(!this.state.list)return Object(a.jsx)("div",{children:"....Loading"});var t=this.state.list,s=t.sender,n=t.receiver,r=t.announcement,c=t.messagesBox;return console.log(c),Object(a.jsxs)("div",{children:[r&&Object(a.jsxs)("h3",{children:["Announcement: ",Object(a.jsx)("strong",{children:r.title})]}),Object(a.jsx)("div",{children:Object(a.jsxs)("h3",{children:["Chat thread between ",s._id===this.context.user._id?Object(a.jsx)("span",{children:n.firstName}):Object(a.jsx)("span",{children:s.firstName})," and you"]})}),Object(a.jsx)("div",{children:c.map((function(t,r){var c=t.author,i=t.message;return c===e.context.user._id?Object(a.jsxs)("div",{className:"right",children:[Object(a.jsx)("img",{src:e.context.user.image,alt:e.context.user.firstName}),Object(a.jsx)("p",{children:i})]},r):Object(a.jsxs)("div",{className:"left",children:[Object(a.jsx)("img",{src:c===s._id?s.image:n.image,alt:c===s._id?s.firstName:n.firstName}),Object(a.jsx)("p",{children:i})]},r)}))}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(a.jsx)("input",{onChange:this.onChange,value:this.state.message,name:"message"}),Object(a.jsx)("button",{children:"Send"})]}),this.state.error&&Object(a.jsx)("p",{children:this.state.error})]})]})}}]),s}(n.Component);Qe.contextType=K;var $e=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(re,{}),Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{exact:!0,path:"/",component:Ce}),Object(a.jsx)(se,{exact:!0,path:"/profile",component:Ze}),Object(a.jsx)(j.b,{exact:!0,path:"/signup",component:ze}),Object(a.jsx)(j.b,{exact:!0,path:"/login",component:_e}),Object(a.jsx)(se,{exact:!0,path:"/announcements/new",component:te}),Object(a.jsx)(se,{exact:!0,path:"/announcements/edit/:idPost",component:te}),Object(a.jsx)(j.b,{exact:!0,path:"/announcements/:service/s",component:ve}),Object(a.jsx)(j.b,{exact:!0,path:"/announcements/:idAnnouncement",component:Pe}),Object(a.jsx)(j.b,{exact:!0,path:"/providers/:service/s",component:Ke}),Object(a.jsx)(j.b,{exact:!0,path:"/provider/:idProvider",component:Re}),Object(a.jsx)(se,{exact:!0,path:"/provider/:idProvider/review",component:de}),Object(a.jsx)(se,{exact:!0,path:"/message/:idMessage",component:Qe}),Object(a.jsx)(se,{exact:!0,path:"/message",component:je})]})]})}}]),s}(n.Component),Xe=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(o.a)(this,s);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={user:null,isLoggedIn:!1,isLoading:!0},e.removeUser=function(){y().then((function(){e.setState({user:null,isLoggedIn:!1,isLoading:!0}),setTimeout((function(){e.setState({isLoading:!1})}),3e3)})).catch((function(e){return console.log(e)}))},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;N().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){console.log(t),e.setState({isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading,removeUser:this.removeUser,setUser:this.setUser};return Object(a.jsx)("div",{children:Object(a.jsx)(K.Provider,{value:e,children:this.props.children})})}}]),s}(n.Component);s(82),s(83),s(84),s(85);i.a.render(Object(a.jsx)(ae.a,{children:Object(a.jsx)(Xe,{children:Object(a.jsx)($e,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.f1c7f847.chunk.js.map